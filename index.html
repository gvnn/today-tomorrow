<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>TodayTomorrow</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <link href="assets/css/style.css" rel="stylesheet">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/img/apple-touch-icon-144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/img/apple-touch-icon-114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/img/apple-touch-icon-72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="assets/img/apple-touch-icon-57-precomposed.png">
        <link rel="apple-touch-startup-image" href="assets/img/startup.png">
        <link rel="shortcut icon" href="assets/img/favicon.ico">
    </head>
    <body>
        <div id="container">
            <div id="app">
                <div id="loading">loading...</div>
            </div>
        </div>
        <div id="footer">
            <span class="update" style="display: none;">
                Something has changed.
                <a href="#" id="refresh">Refresh page.</a>
                -
            </span>
            <a href="https://github.com/gvnn/today-tomorrow#readme" target="_blank">
                about
            </a>
        </div>
        <script src="//www.dropbox.com/static/api/1/dropbox-datastores-0.1.0-b3.js" type="text/javascript"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script src="assets/js/vendor/ractive.min.js" type="text/javascript"></script>
        <script src="assets/js/today-tomorrow.js" type="text/javascript"></script>
        <script id="template" type="ractive">
            {{#loadingInfo}}
                <div id="loading">loading...</div>
            {{/loadingInfo}}
            {{#notSignedIn}}
                <div id="connect">
                    <a id="connectImage"><img src="assets/img/dropbox.png"></a>
                    <a id="connectLink">Connect with Dropbox</a>
                </div>
            {{/notSignedIn}}
            {{#signedIn}}
                <a id="menuLink" proxy-tap="toggleMenu" class="menu-link">
                    menu
                </a>
                <div id="menu"></div>
                <div id="logout">
                    <a proxy-tap="disconnect">Disconnect from Dropbox</a>
                </div>
                <div id="todo">
                    <div id="todayContainer" style='min-height: {{ minHeight() }}px;'>
                        <div class="title">
                            <h2 dir="{{ dir() }}">{{{ today() }}}</h2>
                            <ul id="todayItemsList">
                            {{#todayItems:i}}
                                {{>listItem}}
                            {{/todayItems}}
                            </ul>
                            <div class="form-container">
                                <div class='new-todo {{( addingToday ? "adding" : "" )}}'>
                                    <a proxy-tap="add:today">Write something new</a>
                                    <div class="new-input-form">
                                        <input
                                            id="newTodayInput"
                                            proxy-keyup="textboxEscape"
                                            proxy-enter="addNew:today"
                                            proxy-blur="cancelAdd:today" type="text">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="tomorrowContainer" style='min-height: {{ minHeight() }}px;'>
                        <div class="title">
                            <h2 dir="{{ dir() }}">{{{ tomorrow() }}}</h2>
                            <ul id="tomorrowItemsList">
                            {{#tomorrowItems:i}}
                                {{>listItem}}
                            {{/tomorrowItems}}
                            </ul>
                            <div class="form-container">
                                <div class='new-todo {{( addingTomorrow ? "adding" : "" )}}'>
                                    <a proxy-tap="add:tomorrow">Write something new</a>
                                    <div class="new-input-form">
                                        <input
                                            id="newTomorrowInput"
                                            proxy-keyup="textboxEscape"
                                            proxy-enter="addNew:tomorrow"
                                            proxy-blur="cancelAdd:tomorrow" type="text">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {{/signedIn}}
        </script>
    </body>
</html>